# PRQL query

    Code
      cat(prql_compile("from a | select {b}"))
    Output
      SELECT
        b
      FROM
        a
      
      -- Generated by PRQL compiler version:0.8.1 (https://prql-lang.org)

---

    Code
      cat(prql_compile("from a | select {b}", NA, FALSE, FALSE))
    Output
      SELECT b FROM a

---

    Code
      cat(unwrap(compile(
        "from star_wars\n    select {star_wars.*}\n    select !{jar_jar_binks, midichlorians}",
        "sql.duckdb", TRUE, TRUE)))
    Output
      SELECT
        * EXCLUDE (jar_jar_binks, midichlorians)
      FROM
        star_wars
      
      -- Generated by PRQL compiler version:0.8.1 target:sql.duckdb (https://prql-lang.org)

# Syntax error query=Mississippi has four Sâ€™s and four Iâ€™s.

    Code
      cat(prql_compile(query, "sql.any", TRUE, FALSE))
    Error <simpleError>
      [31mError:[0m
         [38;5;246mâ•­[0m[38;5;246mâ”€[0m[38;5;246m[[0m:1:23[38;5;246m][0m
         [38;5;246mâ”‚[0m
       [38;5;246m1 â”‚[0m [38;5;249mM[0m[38;5;249mi[0m[38;5;249ms[0m[38;5;249ms[0m[38;5;249mi[0m[38;5;249ms[0m[38;5;249ms[0m[38;5;249mi[0m[38;5;249mp[0m[38;5;249mp[0m[38;5;249mi[0m[38;5;249m [0m[38;5;249mh[0m[38;5;249ma[0m[38;5;249ms[0m[38;5;249m [0m[38;5;249mf[0m[38;5;249mo[0m[38;5;249mu[0m[38;5;249mr[0m[38;5;249m [0m[38;5;249mS[0mâ€™[38;5;249ms[0m[38;5;249m [0m[38;5;249ma[0m[38;5;249mn[0m[38;5;249md[0m[38;5;249m [0m[38;5;249mf[0m[38;5;249mo[0m[38;5;249mu[0m[38;5;249mr[0m[38;5;249m [0m[38;5;249mI[0m[38;5;249mâ€™[0m[38;5;249ms[0m[38;5;249m.[0m
       [38;5;240m  â”‚[0m                       â”¬
       [38;5;240m  â”‚[0m                       â•°â”€â”€ unexpected â€™
      [38;5;246mâ”€â”€â”€â•¯[0m
      [31mError:[0m
         [38;5;246mâ•­[0m[38;5;246mâ”€[0m[38;5;246m[[0m:1:36[38;5;246m][0m
         [38;5;246mâ”‚[0m
       [38;5;246m1 â”‚[0m [38;5;249mM[0m[38;5;249mi[0m[38;5;249ms[0m[38;5;249ms[0m[38;5;249mi[0m[38;5;249ms[0m[38;5;249ms[0m[38;5;249mi[0m[38;5;249mp[0m[38;5;249mp[0m[38;5;249mi[0m[38;5;249m [0m[38;5;249mh[0m[38;5;249ma[0m[38;5;249ms[0m[38;5;249m [0m[38;5;249mf[0m[38;5;249mo[0m[38;5;249mu[0m[38;5;249mr[0m[38;5;249m [0m[38;5;249mS[0m[38;5;249mâ€™[0m[38;5;249ms[0m[38;5;249m [0m[38;5;249ma[0m[38;5;249mn[0m[38;5;249md[0m[38;5;249m [0m[38;5;249mf[0m[38;5;249mo[0m[38;5;249mu[0m[38;5;249mr[0m[38;5;249m [0m[38;5;249mI[0mâ€™[38;5;249ms[0m[38;5;249m.[0m
       [38;5;240m  â”‚[0m                                    â”¬
       [38;5;240m  â”‚[0m                                    â•°â”€â”€ unexpected â€™
      [38;5;246mâ”€â”€â”€â•¯[0m
      [31mError:[0m
         [38;5;246mâ•­[0m[38;5;246mâ”€[0m[38;5;246m[[0m:1:38[38;5;246m][0m
         [38;5;246mâ”‚[0m
       [38;5;246m1 â”‚[0m [38;5;249mM[0m[38;5;249mi[0m[38;5;249ms[0m[38;5;249ms[0m[38;5;249mi[0m[38;5;249ms[0m[38;5;249ms[0m[38;5;249mi[0m[38;5;249mp[0m[38;5;249mp[0m[38;5;249mi[0m[38;5;249m [0m[38;5;249mh[0m[38;5;249ma[0m[38;5;249ms[0m[38;5;249m [0m[38;5;249mf[0m[38;5;249mo[0m[38;5;249mu[0m[38;5;249mr[0m[38;5;249m [0m[38;5;249mS[0m[38;5;249mâ€™[0m[38;5;249ms[0m[38;5;249m [0m[38;5;249ma[0m[38;5;249mn[0m[38;5;249md[0m[38;5;249m [0m[38;5;249mf[0m[38;5;249mo[0m[38;5;249mu[0m[38;5;249mr[0m[38;5;249m [0m[38;5;249mI[0m[38;5;249mâ€™[0m[38;5;249ms[0m.
       [38;5;240m  â”‚[0m                                      â”¬
       [38;5;240m  â”‚[0m                                      â•°â”€â”€ Expected * or an identifier, but didn't find anything before the end.
      [38;5;246mâ”€â”€â”€â•¯[0m

# Syntax error query=from a | select [b]

    Code
      cat(prql_compile(query, "sql.any", TRUE, FALSE))
    Error <simpleError>
      [31mError:[0m
         [38;5;246mâ•­[0m[38;5;246mâ”€[0m[38;5;246m[[0m:1:17[38;5;246m][0m
         [38;5;246mâ”‚[0m
       [38;5;246m1 â”‚[0m [38;5;249mf[0m[38;5;249mr[0m[38;5;249mo[0m[38;5;249mm[0m[38;5;249m [0m[38;5;249ma[0m[38;5;249m [0m[38;5;249m|[0m[38;5;249m [0m[38;5;249ms[0m[38;5;249me[0m[38;5;249ml[0m[38;5;249me[0m[38;5;249mc[0m[38;5;249mt[0m[38;5;249m [0m[b]
       [38;5;240m  â”‚[0m                 â”€â”¬â”€
       [38;5;240m  â”‚[0m                  â•°â”€â”€â”€ unexpected `[_frame.a.b]`
       [38;5;240m  â”‚[0m
       [38;5;240m  â”‚[0m [38;5;115mHelp[0m: this is probably a 'bad type' error (we are working on that)
      [38;5;246mâ”€â”€â”€â•¯[0m

# Syntax error query=from a | select {{{b

    Code
      cat(prql_compile(query, "sql.any", TRUE, FALSE))
    Error <simpleError>
      [31mError:[0m
         [38;5;246mâ•­[0m[38;5;246mâ”€[0m[38;5;246m[[0m:1:20[38;5;246m][0m
         [38;5;246mâ”‚[0m
       [38;5;246m1 â”‚[0m [38;5;249mf[0m[38;5;249mr[0m[38;5;249mo[0m[38;5;249mm[0m[38;5;249m [0m[38;5;249ma[0m[38;5;249m [0m[38;5;249m|[0m[38;5;249m [0m[38;5;249ms[0m[38;5;249me[0m[38;5;249ml[0m[38;5;249me[0m[38;5;249mc[0m[38;5;249mt[0m[38;5;249m [0m[38;5;249m{[0m[38;5;249m{[0m[38;5;249m{[0mb
       [38;5;240m  â”‚[0m                    â”¬
       [38;5;240m  â”‚[0m                    â•°â”€â”€ unexpected end of input while parsing function call
      [38;5;246mâ”€â”€â”€â•¯[0m

# Targets target=sql.any

    Code
      cat(prql_compile(query, target, TRUE, FALSE))
    Output
      SELECT
        origin,
        dest,
        COUNT(*) AS num_flts,
        ROUND(AVG(arr_delay), 0) AS avg_delay
      FROM
        flights
      WHERE
        distance BETWEEN 200 AND 300
        AND air_time IS NOT NULL
      GROUP BY
        origin,
        dest
      ORDER BY
        origin DESC,
        avg_delay
      LIMIT
        2

# Targets target=sql.ansi

    Code
      cat(prql_compile(query, target, TRUE, FALSE))
    Output
      SELECT
        origin,
        dest,
        COUNT(*) AS num_flts,
        ROUND(AVG(arr_delay), 0) AS avg_delay
      FROM
        flights
      WHERE
        distance BETWEEN 200 AND 300
        AND air_time IS NOT NULL
      GROUP BY
        origin,
        dest
      ORDER BY
        origin DESC,
        avg_delay
      LIMIT
        2

# Targets target=sql.bigquery

    Code
      cat(prql_compile(query, target, TRUE, FALSE))
    Output
      SELECT
        origin,
        dest,
        COUNT(*) AS num_flts,
        ROUND(AVG(arr_delay), 0) AS avg_delay
      FROM
        flights
      WHERE
        distance BETWEEN 200 AND 300
        AND air_time IS NOT NULL
      GROUP BY
        origin,
        dest
      ORDER BY
        origin DESC,
        avg_delay
      LIMIT
        2

# Targets target=sql.clickhouse

    Code
      cat(prql_compile(query, target, TRUE, FALSE))
    Output
      SELECT
        origin,
        dest,
        COUNT(*) AS num_flts,
        ROUND(AVG(arr_delay), 0) AS avg_delay
      FROM
        flights
      WHERE
        distance BETWEEN 200 AND 300
        AND air_time IS NOT NULL
      GROUP BY
        origin,
        dest
      ORDER BY
        origin DESC,
        avg_delay
      LIMIT
        2

# Targets target=sql.duckdb

    Code
      cat(prql_compile(query, target, TRUE, FALSE))
    Output
      SELECT
        origin,
        dest,
        COUNT(*) AS num_flts,
        ROUND(AVG(arr_delay), 0) AS avg_delay
      FROM
        flights
      WHERE
        distance BETWEEN 200 AND 300
        AND air_time IS NOT NULL
      GROUP BY
        origin,
        dest
      ORDER BY
        origin DESC,
        avg_delay
      LIMIT
        2

# Targets target=sql.generic

    Code
      cat(prql_compile(query, target, TRUE, FALSE))
    Output
      SELECT
        origin,
        dest,
        COUNT(*) AS num_flts,
        ROUND(AVG(arr_delay), 0) AS avg_delay
      FROM
        flights
      WHERE
        distance BETWEEN 200 AND 300
        AND air_time IS NOT NULL
      GROUP BY
        origin,
        dest
      ORDER BY
        origin DESC,
        avg_delay
      LIMIT
        2

# Targets target=sql.mssql

    Code
      cat(prql_compile(query, target, TRUE, FALSE))
    Output
      SELECT
        TOP (2) origin,
        dest,
        COUNT(*) AS num_flts,
        ROUND(AVG(arr_delay), 0) AS avg_delay
      FROM
        flights
      WHERE
        distance BETWEEN 200 AND 300
        AND air_time IS NOT NULL
      GROUP BY
        origin,
        dest
      ORDER BY
        origin DESC,
        avg_delay

# Targets target=sql.mysql

    Code
      cat(prql_compile(query, target, TRUE, FALSE))
    Output
      SELECT
        origin,
        dest,
        COUNT(*) AS num_flts,
        ROUND(AVG(arr_delay), 0) AS avg_delay
      FROM
        flights
      WHERE
        distance BETWEEN 200 AND 300
        AND air_time IS NOT NULL
      GROUP BY
        origin,
        dest
      ORDER BY
        origin DESC,
        avg_delay
      LIMIT
        2

# Targets target=sql.postgres

    Code
      cat(prql_compile(query, target, TRUE, FALSE))
    Output
      SELECT
        origin,
        dest,
        COUNT(*) AS num_flts,
        ROUND((AVG(arr_delay)) :: numeric, 0) AS avg_delay
      FROM
        flights
      WHERE
        distance BETWEEN 200 AND 300
        AND air_time IS NOT NULL
      GROUP BY
        origin,
        dest
      ORDER BY
        origin DESC,
        avg_delay
      LIMIT
        2

# Targets target=sql.sqlite

    Code
      cat(prql_compile(query, target, TRUE, FALSE))
    Output
      SELECT
        origin,
        dest,
        COUNT(*) AS num_flts,
        ROUND(AVG(arr_delay), 0) AS avg_delay
      FROM
        flights
      WHERE
        distance BETWEEN 200 AND 300
        AND air_time IS NOT NULL
      GROUP BY
        origin,
        dest
      ORDER BY
        origin DESC,
        avg_delay
      LIMIT
        2

# Targets target=sql.snowflake

    Code
      cat(prql_compile(query, target, TRUE, FALSE))
    Output
      SELECT
        origin,
        dest,
        COUNT(*) AS num_flts,
        ROUND(AVG(arr_delay), 0) AS avg_delay
      FROM
        flights
      WHERE
        distance BETWEEN 200 AND 300
        AND air_time IS NOT NULL
      GROUP BY
        origin,
        dest
      ORDER BY
        origin DESC,
        avg_delay
      LIMIT
        2

